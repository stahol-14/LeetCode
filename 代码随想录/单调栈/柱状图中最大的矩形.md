# [柱状图中最大的矩形](柱状图中最大的矩形"https://leetcode.cn/problems/largest-rectangle-in-histogram/description/")

## 题目描述
给定 n 个非负整数，用来表示柱状图中各个柱子的高度。每个柱子彼此相邻，且宽度为 1 。

求在该柱状图中，能够勾勒出来的矩形的最大面积。

### 思路：单调栈

- 限制图形大小的两个因素：
  - 长（左右边界）
  - 宽（高度）：取决于当前柱子左右高度更低的柱子高度

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        // 单调栈——单调递减（从栈顶到栈底）
        int n = heights.length;
        int maxArea = 0;

        Deque<Integer> stack = new ArrayDeque<>(); // 单调栈 存放下标

        int[] newHeight = new int[n + 2]; // 在两侧添加哨兵 0，避免边界判断
        for(int i = 0; i < n; i++){
            newHeight[i + 1] = heights[i];
        }

        // 从下标 0 ~ n+1 遍历，哨兵保证所有元素出栈
        for(int i = 0; i < newHeight.length; i++){
            // 当前高度 < 栈顶，构成矩形（以当前栈顶元素为高，两边比自己低作为左右边界）
            while( (!stack.isEmpty()) && newHeight[i] < newHeight[stack.peek()] ){

                int height = newHeight[stack.pop()]; // 高度
                int left = stack.peek(); // 新栈顶是左边界
                int width = i - left - 1;
                int curArea = height * width;

                maxArea = Math.max(maxArea, curArea);
            }
            stack.push(i);
        }

        return maxArea;
    }
}
```

#### 复杂度分析
时间复杂度：O(n)

空间复杂度：O(n)

### 总结

为什么需要在左右两侧增加0作为哨兵？
- 确保所有柱子都会被弹出计算面积（最后一根也能触发出栈）
- 避免空栈或边界判断，统一左边界为栈顶索引